<!DOCTYPE html>
<html>
<head>
    <title>Socket.IO Test</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <button id="start">Start</button>

    <div>
        <label for="username">Username:</label>
        <input type="text" id="username">
    </div>
    <div>
        <label for="location">Location:</label>
        <input type="text" id="location">
    </div>
    <div>
        <label for="role">Role (0 for buyer, 1 for seller):</label>
        <input type="number" id="role" min="0" max="1">
    </div>

    <button id="sendData">Send Data</button>
    <button id="finish">Finish</button>

    <div id="result"></div>

    <script>
        var socket = io("http://localhost:6001");

        document.getElementById('start').onclick = function() {
            fetch('http://localhost:6001/1/start');  // Start room with product id 1
        }

        document.getElementById('sendData').onclick = function() {
            var username = document.getElementById('username').value;
            var location = document.getElementById('location').value;
            var role = document.getElementById('role').value;

            socket.emit('location_data', {
                room: 1,
                username: username,
                location: location,
                role: parseInt(role)
            });
        }

        document.getElementById('finish').onclick = function() {
            fetch('http://localhost:6001/1/finish');  // Finish room with product id 1
        }

        socket.on('integrated_data', function(data) {
            var resultDiv = document.getElementById('result');
            resultDiv.innerHTML = JSON.stringify(data, null, 2);
        });
    </script>
</body>
</html>
